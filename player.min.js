var player1;function plyrSetup(){document.getElementById("videocontainer").style.display="block",window.addEventListener("orientationchange",(function(){Math.abs(window.orientation)>45&&Math.abs(window.orientation)<135?player1.fullscreen.enter():player1.fullscreen.exit()})),player1.on("seeking",(e=>{window.innerWidth<935&&seekFast()})),void 0!==screen.orientation&&(player1.on("enterfullscreen",(e=>{screen.orientation.lock("landscape")})),player1.on("exitfullscreen",(e=>{screen.orientation.unlock()}))),player1.on("error",(e=>{var t=document.getElementsByTagName("video")[0];console.log("Error occured, reloading video..."),t.load()})),document.addEventListener("keyup",(e=>{e.shiftKey&&"ArrowRight"===e.key&&player1.forward(80),e.shiftKey&&"ArrowLeft"===e.key&&player1.rewind(80)}),!1),player1.on("playing",(e=>{if(playfirsttime&&"undefined"!=typeof Storage){var t=localStorage.getItem("playback-"+window.location.href.split("?")[1]);null!==t&&(t=parseFloat(t),player1.duration-60>t&&(player1.currentTime=t)),playfirsttime=!1}})),timeMonitor(),(player1.muted||player1.volume<.1)&&(player1.muted=!1,player1.volume=1)}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("video");var t=window.location.href.split("?")[1];if(void 0===t)return void shownotif("Currently unavailable, try other stream");if(!1===(t=dec64(t)))return void shownotif("URL Invalid");if(t.includes("bestanimescdn")&&"undefined"!=typeof replacement&&(t=t.replace("bestanimescdn",replacement)),window.innerWidth>935&&!("ontouchstart"in window)||document.hidden)var n={controls:!0,seek:!0},o=["play-large","play","progress","current-time","duration","mute","volume","settings","pip","airplay","fullscreen"];else n={controls:!1,seek:!0},o=["play-large","rewind","play","fast-forward","progress","current-time","duration","settings","pip","airplay","fullscreen"];const r={i18n:{play:"Play (K)",pause:"Pause (K)",mute:"Mute (M)",unmute:"Unmute (M)",enterFullscreen:"Enter fullscreen (F)",exitFullscreen:"Exit fullscreen (F)"},controls:o,tooltips:n,seekTime:5,keyboard:{focused:!0,global:!0},fullscreen:{iosNative:!0}};if(setTimeout((()=>{document.getElementById("videocontainer").style.display="block"}),5e3),Hls.isSupported()&&t.includes(".m3u8")){checkvideo(t);const n=new Hls;n.loadSource(t),n.on(Hls.Events.MANIFEST_PARSED,(function(t,o){const i=n.levels.map((e=>e.height)).reverse();r.quality={default:i[0],options:i,forced:!0,onChange:e=>{return t=e,void window.hls.levels.forEach(((e,n)=>{e.height===t&&(window.hls.currentLevel=n)}));var t}},player1=new Plyr(e,r),plyrSetup(),window.hls.currentLevel=-1})),n.attachMedia(e),window.hls=n}else player1=new Plyr(e,r),plyrSetup(),player1.source={type:"video",sources:[{src:t}]};window.addEventListener("message",handleMsg,!1)}));var monitorInterval,playfirsttime=!0;function timeMonitor(){"undefined"!=typeof Storage&&(monitorInterval=setInterval((()=>{!playfirsttime&&player1.playing&&localStorage.setItem("playback-"+window.location.href.split("html?")[1],player1.currentTime)}),2e3))}var seekLastTime,seeking=!1;function seekFast(){seeking&&seekLastTime<player1.currentTime?player1.forward(70):seeking&&seekLastTime>player1.currentTime&&player1.rewind(70),seeking=!0,seekLastTime=player1.currentTime,setTimeout((()=>{seeking=!1}),500)}function checkvideo(e){var t=new XMLHttpRequest;t.open("GET",e),t.timeout=5e3,t.onload=function(){200!==this.status&&shownotif("Video expired.<br>Please use another stream",2e5)},t.onerror=function(){shownotif("Video expired.<br>Please use another stream",2e5)},t.send()}function handleMsg(e){if("Success"===e.data)document.getElementById("notif").style.opacity=0;else if("Reload"===e.data){var t=document.getElementsByTagName("video")[0];console.log("Reloading video...");var n=player1.currentTime;t.load(),t.play(),t.currentTime=n}else"screenshot"===e.data&&screenshoot()}function screenshoot(){var e=document.getElementsByTagName("video")[0],t=document.createElement("canvas");t.style.cssText="position:fixed; width:100%; box-shadow:0px 2px 5px 2px #131313c7; bottom:0; right:0; transition: all 0.4s ease; opacity:1",t.width=e.videoWidth,t.height=e.videoHeight,t.getContext("2d").drawImage(e,0,0,t.width,t.height),document.body.appendChild(t),setTimeout((()=>{t.style.width="30%",t.style.bottom="5px",t.style.right="5px"}),50),setTimeout((()=>{t.style.opacity="0"}),3e3),setTimeout((()=>{t.remove()}),3500)}function shownotif(e,t=4e5){var n=document.getElementById("notif");n.innerHTML=e,n.style.display="block",setTimeout((function(){n.style.display="none"}),t)}function dec64(e){if(void 0===e||""===e.trim())return!1;try{return atob(e)}catch(e){return!1}}
